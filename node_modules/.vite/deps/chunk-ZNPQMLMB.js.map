{
  "version": 3,
  "sources": ["../../@shoelace-style/shoelace/dist/chunks/chunk.OSU5LOVZ.js", "../../@shoelace-style/shoelace/dist/chunks/chunk.P22EBAVT.js"],
  "sourcesContent": ["// src/internal/tabbable.ts\nvar computedStyleMap = /* @__PURE__ */ new WeakMap();\nfunction getCachedComputedStyle(el) {\n  let computedStyle = computedStyleMap.get(el);\n  if (!computedStyle) {\n    computedStyle = window.getComputedStyle(el, null);\n    computedStyleMap.set(el, computedStyle);\n  }\n  return computedStyle;\n}\nfunction isVisible(el) {\n  if (typeof el.checkVisibility === \"function\") {\n    return el.checkVisibility({ checkOpacity: false, checkVisibilityCSS: true });\n  }\n  const computedStyle = getCachedComputedStyle(el);\n  return computedStyle.visibility !== \"hidden\" && computedStyle.display !== \"none\";\n}\nfunction isOverflowingAndTabbable(el) {\n  const computedStyle = getCachedComputedStyle(el);\n  const { overflowY, overflowX } = computedStyle;\n  if (overflowY === \"scroll\" || overflowX === \"scroll\") {\n    return true;\n  }\n  if (overflowY !== \"auto\" || overflowX !== \"auto\") {\n    return false;\n  }\n  const isOverflowingY = el.scrollHeight > el.clientHeight;\n  if (isOverflowingY && overflowY === \"auto\") {\n    return true;\n  }\n  const isOverflowingX = el.scrollWidth > el.clientWidth;\n  if (isOverflowingX && overflowX === \"auto\") {\n    return true;\n  }\n  return false;\n}\nfunction isTabbable(el) {\n  const tag = el.tagName.toLowerCase();\n  const tabindex = Number(el.getAttribute(\"tabindex\"));\n  const hasTabindex = el.hasAttribute(\"tabindex\");\n  if (hasTabindex && (isNaN(tabindex) || tabindex <= -1)) {\n    return false;\n  }\n  if (el.hasAttribute(\"disabled\")) {\n    return false;\n  }\n  if (el.closest(\"[inert]\")) {\n    return false;\n  }\n  if (tag === \"input\" && el.getAttribute(\"type\") === \"radio\") {\n    const rootNode = el.getRootNode();\n    const findRadios = `input[type='radio'][name=\"${el.getAttribute(\"name\")}\"]`;\n    const firstChecked = rootNode.querySelector(`${findRadios}:checked`);\n    if (firstChecked) {\n      return firstChecked === el;\n    }\n    const firstRadio = rootNode.querySelector(findRadios);\n    return firstRadio === el;\n  }\n  if (!isVisible(el)) {\n    return false;\n  }\n  if ((tag === \"audio\" || tag === \"video\") && el.hasAttribute(\"controls\")) {\n    return true;\n  }\n  if (el.hasAttribute(\"tabindex\")) {\n    return true;\n  }\n  if (el.hasAttribute(\"contenteditable\") && el.getAttribute(\"contenteditable\") !== \"false\") {\n    return true;\n  }\n  const isNativelyTabbable = [\n    \"button\",\n    \"input\",\n    \"select\",\n    \"textarea\",\n    \"a\",\n    \"audio\",\n    \"video\",\n    \"summary\",\n    \"iframe\"\n  ].includes(tag);\n  if (isNativelyTabbable) {\n    return true;\n  }\n  return isOverflowingAndTabbable(el);\n}\nfunction getTabbableBoundary(root) {\n  var _a, _b;\n  const tabbableElements = getTabbableElements(root);\n  const start = (_a = tabbableElements[0]) != null ? _a : null;\n  const end = (_b = tabbableElements[tabbableElements.length - 1]) != null ? _b : null;\n  return { start, end };\n}\nfunction getSlottedChildrenOutsideRootElement(slotElement, root) {\n  var _a;\n  return ((_a = slotElement.getRootNode({ composed: true })) == null ? void 0 : _a.host) !== root;\n}\nfunction getTabbableElements(root) {\n  const walkedEls = /* @__PURE__ */ new WeakMap();\n  const tabbableElements = [];\n  function walk(el) {\n    if (el instanceof Element) {\n      if (el.hasAttribute(\"inert\") || el.closest(\"[inert]\")) {\n        return;\n      }\n      if (walkedEls.has(el)) {\n        return;\n      }\n      walkedEls.set(el, true);\n      if (!tabbableElements.includes(el) && isTabbable(el)) {\n        tabbableElements.push(el);\n      }\n      if (el instanceof HTMLSlotElement && getSlottedChildrenOutsideRootElement(el, root)) {\n        el.assignedElements({ flatten: true }).forEach((assignedEl) => {\n          walk(assignedEl);\n        });\n      }\n      if (el.shadowRoot !== null && el.shadowRoot.mode === \"open\") {\n        walk(el.shadowRoot);\n      }\n    }\n    for (const e of el.children) {\n      walk(e);\n    }\n  }\n  walk(root);\n  return tabbableElements.sort((a, b) => {\n    const aTabindex = Number(a.getAttribute(\"tabindex\")) || 0;\n    const bTabindex = Number(b.getAttribute(\"tabindex\")) || 0;\n    return bTabindex - aTabindex;\n  });\n}\n\nexport {\n  getTabbableBoundary,\n  getTabbableElements\n};\n", "import {\n  getTabbableElements\n} from \"./chunk.OSU5LOVZ.js\";\nimport {\n  __yieldStar\n} from \"./chunk.KAW7D32O.js\";\n\n// src/internal/active-elements.ts\nfunction* activeElements(activeElement = document.activeElement) {\n  if (activeElement === null || activeElement === void 0) return;\n  yield activeElement;\n  if (\"shadowRoot\" in activeElement && activeElement.shadowRoot && activeElement.shadowRoot.mode !== \"closed\") {\n    yield* __yieldStar(activeElements(activeElement.shadowRoot.activeElement));\n  }\n}\nfunction getDeepestActiveElement() {\n  return [...activeElements()].pop();\n}\n\n// src/internal/modal.ts\nvar activeModals = [];\nvar Modal = class {\n  constructor(element) {\n    this.tabDirection = \"forward\";\n    this.handleFocusIn = () => {\n      if (!this.isActive()) return;\n      this.checkFocus();\n    };\n    this.handleKeyDown = (event) => {\n      var _a;\n      if (event.key !== \"Tab\" || this.isExternalActivated) return;\n      if (!this.isActive()) return;\n      const currentActiveElement = getDeepestActiveElement();\n      this.previousFocus = currentActiveElement;\n      if (this.previousFocus && this.possiblyHasTabbableChildren(this.previousFocus)) {\n        return;\n      }\n      if (event.shiftKey) {\n        this.tabDirection = \"backward\";\n      } else {\n        this.tabDirection = \"forward\";\n      }\n      const tabbableElements = getTabbableElements(this.element);\n      let currentFocusIndex = tabbableElements.findIndex((el) => el === currentActiveElement);\n      this.previousFocus = this.currentFocus;\n      const addition = this.tabDirection === \"forward\" ? 1 : -1;\n      while (true) {\n        if (currentFocusIndex + addition >= tabbableElements.length) {\n          currentFocusIndex = 0;\n        } else if (currentFocusIndex + addition < 0) {\n          currentFocusIndex = tabbableElements.length - 1;\n        } else {\n          currentFocusIndex += addition;\n        }\n        this.previousFocus = this.currentFocus;\n        const nextFocus = (\n          /** @type {HTMLElement} */\n          tabbableElements[currentFocusIndex]\n        );\n        if (this.tabDirection === \"backward\") {\n          if (this.previousFocus && this.possiblyHasTabbableChildren(this.previousFocus)) {\n            return;\n          }\n        }\n        if (nextFocus && this.possiblyHasTabbableChildren(nextFocus)) {\n          return;\n        }\n        event.preventDefault();\n        this.currentFocus = nextFocus;\n        (_a = this.currentFocus) == null ? void 0 : _a.focus({ preventScroll: false });\n        const allActiveElements = [...activeElements()];\n        if (allActiveElements.includes(this.currentFocus) || !allActiveElements.includes(this.previousFocus)) {\n          break;\n        }\n      }\n      setTimeout(() => this.checkFocus());\n    };\n    this.handleKeyUp = () => {\n      this.tabDirection = \"forward\";\n    };\n    this.element = element;\n    this.elementsWithTabbableControls = [\"iframe\"];\n  }\n  /** Activates focus trapping. */\n  activate() {\n    activeModals.push(this.element);\n    document.addEventListener(\"focusin\", this.handleFocusIn);\n    document.addEventListener(\"keydown\", this.handleKeyDown);\n    document.addEventListener(\"keyup\", this.handleKeyUp);\n  }\n  /** Deactivates focus trapping. */\n  deactivate() {\n    activeModals = activeModals.filter((modal) => modal !== this.element);\n    this.currentFocus = null;\n    document.removeEventListener(\"focusin\", this.handleFocusIn);\n    document.removeEventListener(\"keydown\", this.handleKeyDown);\n    document.removeEventListener(\"keyup\", this.handleKeyUp);\n  }\n  /** Determines if this modal element is currently active or not. */\n  isActive() {\n    return activeModals[activeModals.length - 1] === this.element;\n  }\n  /** Activates external modal behavior and temporarily disables focus trapping. */\n  activateExternal() {\n    this.isExternalActivated = true;\n  }\n  /** Deactivates external modal behavior and re-enables focus trapping. */\n  deactivateExternal() {\n    this.isExternalActivated = false;\n  }\n  checkFocus() {\n    if (this.isActive() && !this.isExternalActivated) {\n      const tabbableElements = getTabbableElements(this.element);\n      if (!this.element.matches(\":focus-within\")) {\n        const start = tabbableElements[0];\n        const end = tabbableElements[tabbableElements.length - 1];\n        const target = this.tabDirection === \"forward\" ? start : end;\n        if (typeof (target == null ? void 0 : target.focus) === \"function\") {\n          this.currentFocus = target;\n          target.focus({ preventScroll: false });\n        }\n      }\n    }\n  }\n  possiblyHasTabbableChildren(element) {\n    return this.elementsWithTabbableControls.includes(element.tagName.toLowerCase()) || element.hasAttribute(\"controls\");\n  }\n};\n\nexport {\n  Modal\n};\n"],
  "mappings": "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",
  "names": []
}
